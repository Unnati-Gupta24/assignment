<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <title>Rebane's Discord Colored Text Generator</title>
    <meta charset="UTF-8">
    <meta name="description" content="Rebane's Discord Colored Text Generator">
    <meta name="author" content="rebane2001">
    <!-- Mantine UI CDN -->
    <link rel="stylesheet" href="https://unpkg.com/@mantine/core@7.6.1/styles.css">
    <style>
        body {
            background: linear-gradient(135deg, #0d0d0d 0%, #1a1a1a 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            font-family: 'Courier New', monospace;
        }
        .ansi-1 { font-weight: 700; text-decoration: none; }
        .ansi-4 { font-weight: 500; text-decoration: underline; }
        .ansi-30 { color: #4f545c; }
        .ansi-31 { color: #ff004d; }
        .ansi-32 { color: #00ff9d; }
        .ansi- Penal code here -->
        .ansi-33 { color: #ffcc00; }
        .ansi-34 { color: #00b7ff; }
        .ansi-35 { color: #ff00ff; }
        .ansi-36 { color: #00ffff; }
        .ansi-37 { color: #ffffff; }
        .ansi-30-bg { background-color: #4f545c; }
        .ansi-31-bg { background-color: #ff004d; }
        .ansi-32-bg { background-color: #00ff9d; }
        .ansi-33-bg { background-color: #ffcc00; }
        .ansi-34-bg { background-color: #00b7ff; }
        .ansi-35-bg { background-color: #ff00ff; }
        .ansi-36-bg { background-color: #00ffff; }
        .ansi-37-bg { background-color: #ffffff; }
        .ansi-40 { background-color: #1a1a1a; }
        .ansi-41 { background-color: #ff004d; }
        .ansi-42 { background-color: #00ff9d; }
        .ansi-43 { background-color: #ffcc00; }
        .ansi-44 { background-color: #00b7ff; }
        .ansi-45 { background-color: #ff00ff; }
        .ansi-46 { background-color: #00ffff; }
        .ansi-47 { background-color: #ffffff; }
        #textarea {
            width: 100%;
            min-height: 200px;
            white-space: pre-wrap;
            font-size: 0.875rem;
            line-height: 1.125rem;
            text-align: left;
            background: #0a0a0a;
            border: 1px solid #00ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
            color: #ffffff;
        }
        .tooltip {
            display: none;
            position: absolute;
            background: #ff00ff;
            border: 1px solid #00ffff;
            border-radius: 3px;
            color: #000;
            font-size: 14px;
            padding: 8px 16px;
            z-index: 1000;
            box-shadow: 0 0 5px #ff00ff;
        }
        .mantine-Title-root {
            text-shadow: 0 0 5px #00ffff, 0 0 10px #ff00ff;
        }
        .mantine-Paper-root {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid #ff004d;
            box-shadow: 0 0 15px rgba(255, 0, 77, 0.3);
        }
        .mantine-Button-root:hover {
            box-shadow: 0 0 10px currentColor;
        }
        .mantine-Text-root {
            color: #d0d0d0;
        }
        .mantine-Anchor-root {
            color: #00ffff;
            text-shadow: 0 0 3px #00ffff;
        }
    </style>
</head>
<body>
    <div id="app">
        <h1 class="mantine-Title-root" data-order="1" style="text-align: center; color: #00ffff;">
            Rebane's Discord <span style="color: #ff00ff;">Colored</span> Text Generator
        </h1>
        <div class="mantine-Container-root" style="max-width: 800px;">
            <div class="mantine-Paper-root" style="padding: 20px; margin-bottom: 20px;">
                <h3 class="mantine-Title-root" data-order="3" style="color: #ffcc00;">About</h3>
                <p class="mantine-Text-root">
                    A cybernetic tool to forge colored Discord messages with ANSI codes. Built for the latest Discord desktop grids.
                </p>
                <p class="mantine-Text-root">
                    Hack your text, tag it with neon hues, then beam it to Discord via the copy matrix below.
                </p>
            </div>
            <div class="mantine-Paper-root" style="padding: 20px; margin-bottom: 20px;">
                <h3 class="mantine-Title-root" data-order="3" style="color: #ffcc00;">Source Code</h3>
                <p class="mantine-Text-root">
                    This runs in your neural net browser. Source code is jacked into 
                    <a href="https://gist.github.com/rebane2001/07f2d8e80df053c70a1576d27eabe97c" class="mantine-Anchor-root">GitHub</a>. 
                    Props to kkrypt0nn for 
                    <a href="https://gist.github.com/kkrypt0nn/a02506f3712ff2d1c8ca7c9e0aed7c06" class="mantine-Anchor-root">this blueprint</a>.
                </p>
            </div>
            <div class="mantine-Paper-root" style="padding: 20px;">
                <h2 class="mantine-Title-root" data-order="2" style="margin-bottom: 20px; color: #00ff9d;">Hack Your Text</h2>
                <div class="mantine-Group-root" style="gap: 10px; margin-bottom: 20px;">
                    <button data-ansi="0" class="mantine-Button-root style-button" data-variant="filled" data-color="gray">Reset Grid</button>
                    <button data-ansi="1" class="mantine-Button-root style-button ansi-1" data-variant="filled" data-color="gray">Bold</button>
                    <button data-ansi="4" class="mantine-Button-root style-button ansi-4" data-variant="filled" data-color="gray">Line</button>
                </div>
                <div class="mantine-Group-root" style="gap: 10px; margin-bottom: 20px;">
                    <span class="mantine-Text-root" data-fw="700" style="color: #ff00ff;">FG</span>
                    <button data-ansi="30" class="mantine-Button-root style-button ansi-30-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="31" class="mantine-Button-root style-button ansi-31-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="32" class="mantine-Button-root style-button ansi-32-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="33" class="mantine-Button-root style-button ansi-33-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="34" class="mantine-Button-root style-button ansi-34-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="35" class="mantine-Button-root style-button ansi-35-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="36" class="mantine-Button-root style-button ansi-36-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="37" class="mantine-Button-root style-button ansi-37-bg" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                </div>
                <div class="mantine-Group-root" style="gap: 10px; margin-bottom: 20px;">
                    <span class="mantine-Text-root" data-fw="700" style="color: #ff00ff;">BG</span>
                    <button data-ansi="40" class="mantine-Button-root style-button ansi-40" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="41" class="mantine-Button-root style-button ansi-41" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="42" class="mantine-Button-root style-button ansi-42" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="43" class="mantine-Button-root style-button ansi-43" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="44" class="mantine-Button-root style-button ansi-44" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="45" class="mantine-Button-root style-button ansi-45" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="46" class="mantine-Button-root style-button ansi-46" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                    <button data-ansi="47" class="mantine-Button-root style-button ansi-47" data-variant="filled" data-size="xs" style="width: 32px; height: 32px;"></button>
                </div>
                <div id="textarea" contenteditable="true" class="mantine-Paper-root" style="padding: 10px; margin-bottom: 20px;">
                    Welcome to <span class="ansi-33">Rebane</span>'s <span class="ansi-45"><span class="ansi-37">Discord</span></span> 
                    <span class="ansi-31">C</span><span class="ansi-32">o</span><span class="ansi-33">l</span><span class="ansi-34">o</span>
                    <span class="ansi-35">r</span><span class="ansi-36">e</span><span class="ansi-37">d</span> Text Generator!
                </div>
                <button class="mantine-Button-root copy" data-variant="filled" data-color="pink" style="width: 100%;">
                    Copy to Discord Grid
                </button>
            </div>
            <small class="mantine-Text-root" style="text-align: center; display: block; margin-top: 20px; color: #ff004d; text-shadow: 0 0 3px #ff004d;">
                Unauthorized cyber-tool. Not linked to Discord corp.
            </small>
        </div>
        <div class="tooltip">Tooltip</div>
    </div>

    <!-- Mantine UI Scripts -->
    <script src="https://unpkg.com/@mantine/core@7.6.1/umd/index.js"></script>
    <script type="text/javascript">
        const textarea = document.querySelector("#textarea");
        const copyBtn = document.querySelector(".copy");
        const tooltip = document.querySelector(".tooltip");

        const tooltipTexts = {
            "30": "Dark Gray (33%)", "31": "Neon Red", "32": "Neon Green", "33": "Neon Yellow",
            "34": "Neon Blue", "35": "Neon Pink", "36": "Neon Cyan", "37": "White",
            "40": "Dark Grid", "41": "Red Glow", "42": "Green Haze", "43": "Yellow Flux",
            "44": "Blue Pulse", "45": "Pink Surge", "46": "Cyan Wave", "47": "White Static"
        };

        // Initial text for reset
        const initialText = `Welcome to <span class="ansi-33">Rebane</span>'s <span class="ansi-45"><span class="ansi-37">Discord</span></span> 
            <span class="ansi-31">C</span><span class="ansi-32">o</span><span class="ansi-33">l</span><span class="ansi-34">o</span>
            <span class="ansi-35">r</span><span class="ansi-36">e</span><span class="ansi-37">d</span> Text Generator!`;

        // Prevent unwanted HTML tags
        textarea.oninput = () => {
            const base = textarea.innerHTML.replace(/<(\/?(br|span|span class="ansi-[0-9]*"))>/g, "[$1]");
            if (base.includes("<") || base.includes(">")) {
                textarea.innerHTML = base.replace(/<.*?>/g, "").replace(/[<>]/g, "").replace(/\[(\/?(br|span|span class="ansi-[0-9]*"))\]/g, "<$1>");
            }
        };

        // Enter key inserts line break
        document.addEventListener('keydown', event => {
            if (event.target === textarea && event.key === 'Enter') {
                document.execCommand('insertLineBreak');
                event.preventDefault();
            }
        });

        // Style and color buttons
        document.querySelectorAll(".style-button").forEach((btn) => {
            btn.addEventListener('click', () => {
                const ansiCode = btn.dataset.ansi;
                if (ansiCode === "0") {
                    // Reset to initial text
                    textarea.innerHTML = initialText;
                    return;
                }

                const selection = window.getSelection();
                if (!selection.rangeCount) return;

                const range = selection.getRangeAt(0);
                const text = range.toString();
                if (!text) return;

                const span = document.createElement("span");
                span.innerText = text;
                span.classList.add(`ansi-${ansiCode}`);

                range.deleteContents();
                range.insertNode(span);

                // Restore selection
                selection.removeAllRanges();
                range.selectNodeContents(span);
                selection.addRange(range);
            });

            btn.addEventListener('mouseenter', () => {
                if (!(btn.dataset.ansi > 4)) return;
                const rect = btn.getBoundingClientRect();
                tooltip.style.display = "block";
                tooltip.innerText = tooltipTexts[btn.dataset.ansi];
                tooltip.style.top = `${rect.top - 36}px`;
                tooltip.style.left = `${rect.left - tooltip.clientWidth / 2 + btn.clientWidth / 2}px`;
            });

            btn.addEventListener('mouseleave', () => {
                tooltip.style.display = "none";
            });
        });

        // Convert DOM to ANSI codes
        function nodesToANSI(nodes, states) {
            let text = "";
            for (const node of nodes) {
                if (node.nodeType === 3) {
                    text += node.textContent;
                    continue;
                }
                if (node.nodeName === "BR") {
                    text += "\n";
                    continue;
                }
                const ansiCode = +(node.className.split("-")[1]);
                const newState = Object.assign({}, states.at(-1));

                if (ansiCode < 30) newState.st = ansiCode;
                if (ansiCode >= 30 && ansiCode < 40) newState.fg = ansiCode;
                if (ansiCode >= 40) newState.bg = ansiCode;

                states.push(newState);
                text += `\x1b[${newState.st};${(ansiCode >= 40) ? newState.bg : newState.fg}m`;
                text += nodesToANSI(node.childNodes, states);
                states.pop();
                text += `\x1b[0m`;
                if (states.at(-1).fg !== 2) text += `\x1b[${states.at(-1).st};${states.at(-1).fg}m`;
                if (states.at(-1).bg !== 2) text += `\x1b[${states.at(-1).st};${states.at(-1).bg}m`;
            }
            return text;
        }

        // Copy functionality
        let copyCount = 0;
        let copyTimeout = null;

        copyBtn.addEventListener('click', () => {
            const toCopy = "```ansi\n" + nodesToANSI(textarea.childNodes, [{ fg: 2, bg: 2, st: 2 }]) + "\n```";
            navigator.clipboard.writeText(toCopy).then(() => {
                if (copyTimeout) clearTimeout(copyTimeout);

                const cyberMessages = [
                    "Jacked In!", "Double Hack!", "Triple Circuit!", "Dominator!", "Gridbreaker!", 
                    "Neon Surge!", "Unstoppable Code!", "Wicked Pulse!", "Cyber Overload!", 
                    "GODHACK!", "BEYOND THE GRID!!!", 
                    Array(16).fill(0).reduce(p => p + String.fromCharCode(Math.floor(Math.random() * 65535)), "")
                ];

                copyBtn.style.backgroundColor = (copyCount <= 8) ? "#00ff9d" : "#ff004d";
                copyBtn.innerText = cyberMessages[copyCount];
                copyCount = Math.min(11, copyCount + 1);
                copyTimeout = setTimeout(() => {
                    copyCount = 0;
                    copyBtn.style.backgroundColor = null;
                    copyBtn.innerText = "Copy to Discord Grid";
                }, 2000);
            }, (err) => {
                if (copyCount > 2) return;
                alert("Grid failure. Jack this instead:\n" + toCopy);
            });
        });
    </script>
</body>
</html>